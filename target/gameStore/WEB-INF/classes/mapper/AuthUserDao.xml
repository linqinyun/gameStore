<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.lin.gamestroe.dao.AuthUserDao">
    <select id="queryAuthUser" resultType="com.lin.gamestroe.entity.AuthUser">
        SELECT *
        FROM gs_auth_user
        ORDER BY auth_id DESC
    </select>
    <select id="queryAuthByUserNameAndPwd" resultType="com.lin.gamestroe.entity.AuthUser" parameterType="String">
        SELECT *
        FROM gs_auth_user
        WHERE username = #{username}
          AND password = #{password}
    </select>
    <select id="queryAuthByAuthId" resultType="com.lin.gamestroe.entity.AuthUser" parameterType="Long">
        SELECT *
        FROM gs_auth_user
        WHERE auth_id = #{authId}
    </select>
    <insert id="insertAuthUser" useGeneratedKeys="true" parameterType="com.lin.gamestroe.entity.AuthUser"
            keyProperty="authId" keyColumn="auth_id">
        INSERT INTO gs_auth_user(username, password, create_time, update_time)
        values (#{username}, #{password}, #{createTime}, #{updateTime})
    </insert>
    <update id="updateAuthUser">
        UPDATE gs_auth_user
        <set>
            <if test="newPassword!=null">password=#{newPassword},</if>
            <if test="updateTime!=null">update_time=#{updateTime}</if>
        </set>
        WHERE
        auth_id=#{authId} AND username=#{username} AND password=#{password}
    </update>
</mapper>